{% extends "layout.html" %}

{% block title %}
    Admin
{% endblock %}

{% block main %}
    <div>
        <h1>Register team</h1>
        <br>
        <h5>Register your team for the current race</h5>
        <br>
        {% if riders %}
            {% set ns = namespace(last_team = "nothing") %}
            {% set ct = namespace(count = 0) %}
            <div class="card-columns">
                <div class="row">
            {% for rider in riders %}
                {% if ct.count == 0 %}
                    {% set ct.count = ct.count + 1 %}
                    <div class="col-auto md-4">
                        <div class="card border-info" style="width: 18rem;">
                            <div class="card-body text-info">
                                <div class="card-header">
                                    <h5 class="card-title">Choose 9 riders</h5>
                                </div>
                                <p class="card-text">click on the riders you would like to have in your team.</p>
                {% endif %}
                {% if rider.rides_for != ns.last_team %}
                    {% set ns.last_team = rider.rides_for %}
                            </div>
                        </div>
                    </div>
                    <div class="col-auto md-4">
                        <div class="card border-dark" style="width: 18rem;">
                            <div class="card-body text-dark">
                                <div class="card-header">
                                    <h5 class="card-title">{{ns.last_team}}</h5>
                                </div>
                                <p class="card-text">{{rider.rider}}</p>
                {% else %}
                                <p class="card-text">{{rider.rider}}</p>
                {% endif %}
            {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
{% endblock %}
