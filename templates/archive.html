{% extends "layout.html" %}

{% block title %}
    Archive
{% endblock %}

{% block adminNav %}
    {% if role == 2 %}
        <li class="nav-item"><a class="nav-link" href="/admin">Admin</a></li>
    {% endif %}
{% endblock %}

{% block main %}
    {% if comps %}
        {% for comp in comps %}    
            <div>
                {% if comp.racetype_id == 1 %}
                    <h1 class="">Tour de France {{comp.year}}</h1>
                {% elif comp.racetype_id == 2 %}
                    <h1 class="">Giro di Italia {{comp.year}}</h1>
                {% elif comp.racetype_id == 3 %}
                    <h1 class="">Vuelta Espana {{comp.year}}</h1>
                {% else %}
                    <h1 class="">Unknown competition</h1>            
                {% endif %}
            </div>
            <div class="row">
                <div class="col-7">
                    {% for team in allteams %} 
                        <div><h2 class="username">{{ team.username }}</h2></div>
                        {{ team.table }}  
                    {% endfor %} 
                </div>
                <div class="col-5">
                    <div class="position-fixed">
                        <div><h2 class="">Leaderboard</h2></div>
                        {{ standings }} 
                    </div>
                </div>
            </div>
        {% endfor %}        
    {% else %}
            <div>
                No valid competition
            </div>
    {% endif %}
    <script>
        $(document).ready(function(){
            $(".DNF:contains('1')").siblings(".rider").css( "text-decoration", "line-through" );
            $(".DNF:contains('2')").siblings(".rider").css( {"font-style": "italic", "font-weight": "bold"} );
            $(".day").filter(function() {
                    return $(this).text() === "0";
                }).text(function () {
                    return $(this).text().replace("0", ""); 
                });
        });
    </script>
{% endblock %}
